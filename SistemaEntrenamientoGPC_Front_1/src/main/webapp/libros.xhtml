<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="template/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <div class="main">

            <!-- FORMULARIO LISTADO/DESCARGA -->
            <h:form id="formListadoLibros">
                <p:dataGrid value="#{librobean.listaLibros}" var="libro"
                            columns="3" layout="grid" paginator="true" rows="9"
                            styleClass="libro-grid">

                    <p:panel styleClass="libro-card">
                        <h3>#{libro.nombre}</h3>
                        <p><b>Descripci칩n:</b> #{libro.descripcion}</p>

                        <div class="acciones">
                            <!-- Descargar PDF -->
                            <p:commandButton value="Descargar PDF" ajax="false"
                                             icon="pi pi-download"
                                             actionListener="#{librobean.seleccionar(libro)}">
                                <p:fileDownload value="#{librobean.pdfDownload}" />
                            </p:commandButton>

                            <!-- Bot칩n Eliminar -->
                            <p:commandButton styleClass="delete-button"
                                             actionListener="#{librobean.eliminar(libro)}"
                                             ajax="true"
                                             value="Eliminar"
                                             rendered="#{librobean.adminIniciada}"
                                             process="@this"
                                             update="formListadoLibros">
                                <f:facet name="output">
                                    <span class="text">Delete</span>
                                    <span class="icon">
                                        <img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png"
                                             alt="delete" />
                                    </span>
                                </f:facet>
                            </p:commandButton>
                        </div>
                    </p:panel>

                </p:dataGrid>
            </h:form>

            <!-- FORMULARIO SUBIDA -->
            <h:form id="formSubidaLibro" enctype="multipart/form-data">
                <p:panel header="A침adir Nuevo Libro" style="margin-top:20px;">

                    <h:panelGrid columns="2" columnClasses="label,value" style="width:100%">
                        <h:outputLabel for="nombre" value="Nombre:" />
                        <p:inputText id="nombre" value="#{librobean.nombre}" required="true" />

                        <h:outputLabel for="descripcion" value="Descripci칩n:" />
                        <p:inputText id="descripcion" value="#{librobean.descripcion}" required="true" />

                        <h:outputLabel for="pdf" value="Archivo PDF:" />
                        <p:fileUpload id="pdf" value="#{librobean.pdf}" mode="simple"
                                      allowTypes="/(\.|\/)(pdf)$/" label="Subir PDF" />

                        <h:outputLabel for="img" value="Imagen:" />
                        <p:fileUpload id="img" value="#{librobean.img}" mode="simple"
                                      allowTypes="/(\.|\/)(jpg|jpeg|png)$/" label="Subir Imagen" />
                    </h:panelGrid>

                    <p:separator />

                    <p:commandButton value="Guardar"
                                     action="#{librobean.guardarNuevoLibro}"
                                     process="@form"
                                     update=":formListadoLibros"
                                     icon="pi pi-save"
                                     styleClass="ui-button-success" />
                </p:panel>
            </h:form>

        </div>
    </ui:define>
</ui:composition>
</html>
